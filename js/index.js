let log=console.log.bind(document);var map,series=[["USA",22.9],["CHN",16.9],["JPN",5.1],["DEU",4.2],["GBR",3.1],["IND",2.9],["FRA",2.9],["ITA",2.1],["CAN",2],["KOR",1.8],["RUS",1.6],["BRA",1.6],["AUS",1.6],["ESP",1.4],["MEX",1.3],["IDN",1.2],["IRN",1.1],["NLD",1],["SAU",.8],["CHE",.8],["TUR",.8],["POL",.7],["SWE",.6],["BEL",.6],["THA",.5],["IRL",.5],["AUT",.5],["NGA",.5],["ISR",.5],["ARG",.5],["NOR",.4],["ZAF",.4],["ARE",.4],["DNK",.4],["EGY",.4],["PHL",.4],["SGP",.4],["MYS",.4],["HKG",.4],["VNM",.4],["BGD",.4],["CHL",.3],["COL",.3],["FIN",.3],["ROU",.3],["CZE",.3],["PRT",.3],["PAK",.3],["NZL",.2]],dataset={},time=Date.now(),autorotate=[39.666666666666664,-30],velocity=[.015,-0],onlyValues=series.map((function(e){return e[1]})),minValue=Math.min.apply(null,onlyValues),maxValue=Math.max.apply(null,onlyValues),paletteScale=d3.scale.linear().domain([minValue,maxValue]).range(["#2b463c","#a0fb9f"]);series.forEach((function(e){var a=e[0],t=e[1];dataset[a]={partnerLink:t,fillColor:paletteScale(t)}}));var globalRotation=[-19.16,-26];function redraw(){d3.select("#world").html(""),init();document.querySelectorAll("[data-info]")}function init(){(map=new Datamap({scope:"world",element:document.getElementById("world"),projection:"orthographic",projectionConfig:{rotation:globalRotation},fills:{defaultFill:"#3f4674"},data:dataset,geographyConfig:{responsive:!0,borderColor:"rgba(84, 141, 178, 0.2)",highlightBorderWidth:1,highlightFillOpacity:1,highlightFillColor:function(e){return void 0!==e.partnerLink?"yellow":e.fillColor||"#3f4674"},popupTemplate:function(e,a){if(a)return["",'<div style="opacity:1;" class="hoverinfo"><strong>'+e.properties.name,":</strong> $"+a.partnerLink+"T",""].join("")},done:function(e){e.svg.call(d3.behavior.zoom().on("zoom",(function(){e.svg.selectAll("g").attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")})))}}})).legend(),map.graticule();var e=d3.behavior.drag().on("drag",(function(){var e=d3.event.dx,a=d3.event.dy,t=map.projection.rotate(),o=map.projection.scale(),l=d3.scale.linear().domain([-1*o,o]).range([-90,90]),n=l(e),r=l(a);t[0]+=n,t[1]-=r,t[1]>90&&(t[1]=90),t[1]<-90&&(t[1]=-90),t[0]>=180&&(t[0]-=360),globalRotation=t,redraw()}));d3.select("#world").select("svg").call(e)}redraw();
